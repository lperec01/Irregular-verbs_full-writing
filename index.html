<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Verb Combo Challenge</title>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --rbx-bg: #232527;
            --rbx-card: #393B3D;
            --rbx-blue: #00A2FF;
            --rbx-green: #00E676;
            --rbx-red: #FF5252;
            --rbx-white: #FFFFFF;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--rbx-bg);
            color: var(--rbx-white);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        #game-container {
            background-color: var(--rbx-card);
            width: 95%;
            max-width: 500px;
            padding: 25px;
            border-radius: 15px;
            border-bottom: 6px solid #1B1D1F;
            text-align: center;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stats-box {
            background: rgba(0,0,0,0.4);
            padding: 8px 15px;
            border-radius: 8px;
            font-family: 'Bungee', cursive;
            font-size: 0.9rem;
        }

        .lives { color: var(--rbx-red); font-size: 1.4rem; }

        h1 {
            font-family: 'Bungee', cursive;
            color: var(--rbx-blue);
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px #000;
            margin: 10px 0;
        }

        .main-card {
            background: #F2F4F5;
            color: #232527;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .given-verb {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 5px;
        }

        .target-word {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--rbx-blue);
            margin-bottom: 20px;
        }

        .input-group {
            text-align: left;
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #444;
        }

        input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 2px solid #DDD;
            border-radius: 8px;
            font-size: 1rem;
            transition: 0.3s;
        }

        input:focus {
            border-color: var(--rbx-blue);
            outline: none;
        }

        input.correct-field { border-color: var(--rbx-green); background: #E8F5E9; }
        input.wrong-field { border-color: var(--rbx-red); background: #FFEBEE; }

        .btn-check {
            background: var(--rbx-green);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            font-family: 'Bungee', cursive;
            font-size: 1.2rem;
            border-radius: 10px;
            border-bottom: 4px solid #00A455;
            cursor: pointer;
        }

        .btn-check:active { transform: translateY(2px); border-bottom-width: 2px; }

        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div class="header">
        <div class="stats-box">PUNTOS: <span id="score">0</span></div>
        <div class="lives" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    </div>

    <h1>COMBO CHALLENGE</h1>

    <div class="main-card">
        <div id="given-label" class="given-verb">Pista dada:</div>
        <div id="main-display" class="target-word">BE</div>
        
        <div id="inputs-container">
            </div>
    </div>

    <button class="btn-check" onclick="validateCombo()">¬°COMPROBAR COMBO!</button>
</div>

<div id="overlay">
    <h1 style="color: var(--rbx-red); font-size: 3rem;">GAME OVER</h1>
    <p id="final-score" style="font-size: 1.5rem;">Puntos: 0</p>
    <button class="btn-check" style="width: 200px;" onclick="location.reload()">REINTENTAR</button>
</div>

<script>
    // Datos extra√≠dos del documento 
    const verbList = [
        {base: "be", past: "was/were", participle: "been", trans: "ser / estar"},
        {base: "blow", past: "blew", participle: "blown", trans: "soplar"},
        {base: "break", past: "broke", participle: "broken", trans: "romper"},
        {base: "bring", past: "brought", participle: "brought", trans: "traer"},
        {base: "build", past: "built", participle: "built", trans: "construir"},
        {base: "buy", past: "bought", participle: "bought", trans: "comprar"},
        {base: "catch", past: "caught", participle: "caught", trans: "atrapar"},
        {base: "choose", past: "chose", participle: "chosen", trans: "elegir"},
        {base: "come", past: "came", participle: "come", trans: "venir"},
        {base: "do", past: "did", participle: "done", trans: "hacer"},
        {base: "draw", past: "drew", participle: "drawn", trans: "dibujar"},
        {base: "drink", past: "drank", participle: "drunk", trans: "beber"},
        {base: "drive", past: "drove", participle: "driven", trans: "conducir"},
        {base: "eat", past: "ate", participle: "eaten", trans: "comer"},
        {base: "find", past: "found", participle: "found", trans: "encontrar"},
        {base: "fly", past: "flew", participle: "flown", trans: "volar"},
        {base: "get", past: "got", participle: "gotten/got", trans: "conseguir"},
        {base: "give", past: "gave", participle: "given", trans: "dar"},
        {base: "go", past: "went", participle: "gone", trans: "ir"},
        {base: "grow", past: "grew", participle: "grown", trans: "crecer"},
        {base: "have", past: "had", participle: "had", trans: "tener"},
        {base: "hear", past: "heard", participle: "heard", trans: "o√≠r"},
        {base: "hide", past: "hid", participle: "hidden", trans: "esconder"},
        {base: "keep", past: "kept", participle: "kept", trans: "mantener"},
        {base: "know", past: "knew", participle: "known", trans: "saber"},
        {base: "learn", past: "learned/learnt", participle: "learned/learnt", trans: "aprender"},
        {base: "lose", past: "lost", participle: "lost", trans: "perder"},
        {base: "make", past: "made", participle: "made", trans: "hacer"},
        {base: "mean", past: "meant", participle: "meant", trans: "significar"},
        {base: "mistake", past: "mistook", participle: "mistaken", trans: "equivocar"},
        {base: "pay", past: "paid", participle: "paid", trans: "pagar"},
        {base: "put", past: "put", participle: "put", trans: "poner"},
        {base: "read", past: "read", participle: "read", trans: "leer"},
        {base: "retell", past: "retold", participle: "retold", trans: "volver a contar"},
        {base: "ride", past: "rode", participle: "ridden", trans: "montar"},
        {base: "ring", past: "rang", participle: "rung", trans: "llamar"},
        {base: "run", past: "ran", participle: "run", trans: "correr"},
        {base: "say", past: "said", participle: "said", trans: "decir"},
        {base: "see", past: "saw", participle: "seen", trans: "ver"},
        {base: "sell", past: "sold", participle: "sold", trans: "vender"},
        {base: "send", past: "sent", participle: "sent", trans: "enviar"},
        {base: "show", past: "showed", participle: "shown", trans: "mostrar"},
        {base: "sing", past: "sang", participle: "sung", trans: "cantar"},
        {base: "sit", past: "sat", participle: "sat", trans: "sentarse"},
        {base: "speak", past: "spoke", participle: "spoken", trans: "hablar"},
        {base: "stand", past: "stood", participle: "stood", trans: "estar de pie"},
        {base: "swim", past: "swam", participle: "swum", trans: "nadar"},
        {base: "take", past: "took", participle: "taken", trans: "tomar"},
        {base: "teach", past: "taught", participle: "taught", trans: "ense√±ar"},
        {base: "tell", past: "told", participle: "told", trans: "decir"},
        {base: "think", past: "thought", participle: "thought", trans: "pensar"},
        {base: "throw", past: "threw", participle: "thrown", trans: "lanzar"},
        {base: "understand", past: "understood", participle: "understood", trans: "entender"},
        {base: "wear", past: "wore", participle: "worn", trans: "llevar puesto"},
        {base: "win", past: "won", participle: "won", trans: "ganar"},
        {base: "write", past: "wrote", participle: "written", trans: "escribir"}
    ];

    let currentVerb = {};
    let score = 0;
    let lives = 3;
    const fields = [
        {id: "base", label: "Infinitive"},
        {id: "past", label: "Past Simple"},
        {id: "participle", label: "Past Participle"},
        {id: "trans", label: "Traducci√≥n"}
    ];

    // --- Motor de Sonidos ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playSound(freq, type, duration) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    function soundWin() { playSound(523.25, 'sine', 0.3); setTimeout(()=>playSound(659.25, 'sine', 0.3), 150); }
    function soundFail() { playSound(150, 'sawtooth', 0.5); }

    function loadNewLevel() {
        currentVerb = verbList[Math.floor(Math.random() * verbList.length)];
        const givenIndex = Math.floor(Math.random() * fields.length);
        const givenField = fields[givenIndex];

        document.getElementById('given-label').innerText = `Pista dada (${givenField.label}):`;
        document.getElementById('main-display').innerText = currentVerb[givenField.id].split('/')[0].toUpperCase();

        const container = document.getElementById('inputs-container');
        container.innerHTML = '';

        fields.forEach((f, index) => {
            if (index !== givenIndex) {
                const div = document.createElement('div');
                div.className = 'input-group';
                div.innerHTML = `
                    <label>${f.label}</label>
                    <input type="text" id="input-${f.id}" autocomplete="off" placeholder="...">
                `;
                container.appendChild(div);
            }
        });
    }

    function validateCombo() {
        let allCorrect = true;
        fields.forEach(f => {
            const el = document.getElementById(`input-${f.id}`);
            if (el) {
                const userVal = el.value.toLowerCase().trim();
                const solutions = currentVerb[f.id].toLowerCase().split('/');
                
                if (solutions.includes(userVal)) {
                    el.className = 'correct-field';
                } else {
                    el.className = 'wrong-field';
                    allCorrect = false;
                }
            }
        });

        if (allCorrect) {
            score += 50;
            soundWin();
            setTimeout(loadNewLevel, 1000);
        } else {
            lives--;
            soundFail();
            updateLives();
            if (lives <= 0) {
                document.getElementById('overlay').style.display = 'flex';
                document.getElementById('final-score').innerText = `Puntos totales: ${score}`;
            }
        }
        document.getElementById('score').innerText = score;
    }

    function updateLives() {
        document.getElementById('lives').innerText = "‚ù§Ô∏è".repeat(lives) + "üñ§".repeat(3 - lives);
    }

    loadNewLevel();
</script>
</body>
</html>